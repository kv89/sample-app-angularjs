webpackJsonp([0],Array(35).concat([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONTACTS_MODULE=void 0;var s=n(107),a=n(108),i=n(110),r=n(109),o=n(112),c=n(111),l=t.CONTACTS_MODULE=angular.module("contacts",[]);l.component("contactView",r.contactView),l.component("contacts",i.contacts),l.component("editContact",o.editContact),l.component("contactDetail",s.contactDetail),l.component("contactList",a.contactList),l.config(["$stateRegistryProvider",function(e){e.register(c.contactsState),e.register(c.newContactState),e.register(c.viewContactState),e.register(c.editContactState)}])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GLOBAL_MODULE=void 0;var s=n(113),a=n(114),i=n(115),r=n(116),o=n(68),c=n(117),l=t.GLOBAL_MODULE=angular.module("global",[]);l.directive("dialog",r.dialog),l.service("AppConfig",s.AppConfig),l.service("AuthService",a.AuthService),l.service("Contacts",i.Contacts),l.service("Folders",i.Folders),l.service("Messages",i.Messages),l.service("DialogService",o.DialogService),l.run(c.authHookRunBlock)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAIN_MODULE=void 0;var s=n(69),a=n(72),i=n(71),r=n(70),o=n(118),c=t.MAIN_MODULE=angular.module("main",[]);c.config(["$uiRouterProvider",function(e){e.trace.enable(1),e.urlService.rules.otherwise({state:"welcome"});var t=e.stateRegistry;t.register(o.appState),t.register(o.homeState),t.register(o.loginState),t.register(o.welcomeState)}]),c.component("app",s.app),c.component("welcome",a.welcome),c.component("login",i.login),c.component("home",r.home)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MYMESSAGES_MODULE=void 0;var s=n(119),a=n(120),i=n(124),r=n(125),o=n(126),c=n(121),l=n(122),u=n(123),d=n(128),f=n(127),p=t.MYMESSAGES_MODULE=angular.module("mymessages",[]);p.directive("sortMessages",l.sortMessages),p.component("compose",s.compose),p.component("folderList",a.folderList),p.component("message",i.message),p.component("messageList",r.messageList),p.component("mymessages",o.mymessages),p.component("messageTable",c.messageTable),p.filter("messageBody",u.messageBody),p.service("MessageListUI",d.MessageListUI),p.config(["$stateRegistryProvider",function(e){e.register(f.composeState),e.register(f.messageState),e.register(f.messageListState),e.register(f.mymessagesState)}])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PREFS_MODULE=void 0;var s=n(129),a=n(130),i=t.PREFS_MODULE=angular.module("prefs",[]);i.component("prefs",s.prefs),i.config(["$stateRegistryProvider",function(e){e.register(a.prefsState)}])},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.DialogService=void 0;var a=n(11),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a);(t.DialogService=function e(t,n,a){s(this,e);var r=t.find("body"),o=i.element("<div class='dialog' dialog='opts'></div>");this.confirm=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Are you sure?",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Yes",c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"No";return n(o)(i.extend(a.$new(),{message:e,details:t,yesMsg:s,noMsg:c})),r.append(o),o.data("promise").finally(function(){return o.removeClass("active").remove()})}}).$inject=["$document","$compile","$rootScope"]},function(e,t,n){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),i=function(){function e(t,n,a){s(this,e),this.AuthService=n,this.$state=a,this.emailAddress=t.emailAddress,this.isAuthenticated=n.isAuthenticated()}return a(e,[{key:"logout",value:function(){var e=this.AuthService,t=this.$state;return e.logout(),t.go("welcome",{},{reload:!0})}},{key:"isActive",value:function(e){return this.$state.includes(e)}}]),e}();i.$inject=["AppConfig","AuthService","$state"];t.app={controller:i,template:'\n    <div class="navheader">\n      <ul ng-if="::$ctrl.isAuthenticated" class="nav nav-tabs">\n    \n        <li ui-sref-active="active"> <a ui-sref="mymessages" role="button"> Messages </a> </li>\n        <li ui-sref-active="active"> <a ui-sref="contacts" role="button"> Contacts </a> </li>\n        <li ui-sref-active="active"> <a ui-sref="prefs" role="button"> Preferences </a> </li>\n    \n        <li class="navbar-right">\n          <button class="btn btn-primary fa fa-home" ui-sref="home"></button>\n          <button style="margin-right: 15px;" class="btn btn-primary" ui-sref="mymessages.compose"><i class="fa fa-envelope"></i> New Message</button>\n        </li>\n    \n        <li class="navbar-text navbar-right logged-in-user" style="margin: 0.5em 1.5em;">\n          <div>\n            {{::$ctrl.emailAddress}} <i class="fa fa-chevron-down"></i>\n            <div class="hoverdrop">\n              <button class="btn btn-primary" ng-click="$ctrl.logout()">Log Out</button>\n            </div>\n          </div>\n        </li>\n    \n      </ul>\n    </div>\n    \n    <div ui-view></div>\n    <div ui-view="mymessages" ng-show="$ctrl.isActive(\'mymessages.**\')"></div>\n    <div ui-view="contacts" ng-show="$ctrl.isActive(\'contacts.**\')"></div>\n'}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.home={template:'\n    <div class="home buttons">\n      <button ui-sref="mymessages" class="btn btn-primary">\n        <h1><i class="fa fa-envelope"></i></h1>\n        <h1>Messages</h1>\n      </button>\n\n      <button ui-sref="contacts" class="btn btn-primary">\n      <h1><i class="fa fa-users"></i></h1>\n      <h1>Contacts</h1>\n      </button>\n\n      <button ui-sref="prefs" class="btn btn-primary">\n        <h1><i class="fa fa-cogs"></i></h1>\n        <h1>Preferences</h1>\n      </button>\n    </div>\n'}},function(e,t,n){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function e(t,n,a){var i=this;s(this,e),this.usernames=n.usernames,this.credentials={username:t.emailAddress,password:"password"},this.login=function(e){i.authenticating=!0;var t=function(){var e=i.returnTo.state(),t=i.returnTo.params(),n=Object.assign({},i.returnTo.options(),{reload:!0});a.go(e,t,n)},s=function(e){return i.errorMessage=e};n.authenticate(e.username,e.password).then(t).catch(s).finally(function(){return i.authenticating=!1})}};a.$inject=["AppConfig","AuthService","$state"];t.login={bindings:{returnTo:"<"},controller:a,template:'\n    <div class="container">\n      <div class="col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2">\n        <h3>Log In</h3>\n        <p>(This login screen is for demonstration only... just pick a username, enter \'password\' and click <b>"Log in"</b>)</p>\n        <hr>\n    \n        <div>\n          <label for="username">Username:</label>\n          <select class="form-control" name="username" id="username"\n            ng-model="$ctrl.credentials.username" ng-options="username for username in $ctrl.usernames"></select>\n          <i style="position: relative; bottom: 1.8em; margin-left: 10em; height: 0"\n              ng-hide="$ctrl.credentials.username" class="fa fa-arrow-left bounce-horizontal"> Choose </i>\n        </div>\n        <br>\n    \n        <div>\n          <label for="password">Password:</label>\n          <input class="form-control" type="password" name="password" ng-model="$ctrl.credentials.password">\n          <i style="position: relative; bottom: 1.8em; margin-left: 5em; height: 0"\n              ng-hide="!$ctrl.credentials.username || $ctrl.credentials.password == \'password\'" class="fa fa-arrow-left bounce-horizontal">\n            Enter \'<b>password</b>\' here\n          </i>\n        </div>\n    \n        <div ng-show="$ctrl.errorMessage" class="well error">{{ $ctrl.errorMessage }}</div>\n    \n        <hr>\n        <div>\n          <button class="btn btn-primary" type="button"\n              ng-disabled="$ctrl.authenticating" ng-click="$ctrl.login($ctrl.credentials)">\n            <i class="fa fa-spin fa-spinner" ng-show="$ctrl.authenticating"></i> <span>Log in</span>\n          </button>\n          <i ng-show="$ctrl.credentials.username && $ctrl.credentials.password == \'password\'" style="position: relative;" class="fa fa-arrow-left bounce-horizontal"> Click Me!</i>\n      </div>\n    </div>\n    '}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.welcome={template:'\n    <div class="container-fluid">\n    \n      <h3>UI-Router Sample App</h3>\n    \n      <p>Welcome to the sample app!</p>\n      <p>This is a demonstration app intended to highlight some patterns that can be used within UI-Router.\n        These patterns should help you to to build cohesive, robust apps.  Additionally, this app uses state-vis\n        to show the tree of states, and a transition log visualizer.</p>\n    \n      <h4>App Overview</h4>\n      <p>\n        First, start exploring the application\'s functionality at a high level by activating\n        one of the three submodules: Messages, Contacts, or Preferences. If you are not already logged in,\n        you will be taken to an authentication screen (the authentication is fake; the password is "password")\n        <div>\n          <button class="btn btn-primary" ui-sref="mymessages"><i class="fa fa-envelope"></i><span>Messages</span></button>\n          <button class="btn btn-primary" ui-sref="contacts"><i class="fa fa-users"></i><span>Contacts</span></button>\n          <button class="btn btn-primary" ui-sref="prefs"><i class="fa fa-cogs"></i><span>Preferences</span></button>\n        </div>\n      </p>\n    \n      <h4>Patterns and Recipes</h4>\n      <ul>\n        <li>Require Authentication</li>\n        <li>Previous State</li>\n        <li>Redirect Hook</li>\n        <li>Default Param Values</li>\n      </ul>\n    </div>'}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=(t.setProp=function(e,t,n){return e[t]=n,e},t.pushToArr=function(e,t){return e.push(t),e}),a=(t.uniqReduce=function(e,t){return-1!==e.indexOf(t)?e:s(e,t)},t.flattenReduce=function(e,t){return e.concat(t)},function(e){return"x"!==e&&"y"!==e?"-":Math.floor(16*Math.random()).toString(16).toUpperCase()});t.guid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".split("").map(a).join("")}},function(e,t,n){"use strict";var s=n(106);!function(e,t,n,s,a,i,r){e.GoogleAnalyticsObject=a,e[a]=e[a]||function(){(e[a].q=e[a].q||[]).push(arguments)},e[a].l=1*new Date,i=t.createElement(n),r=t.getElementsByTagName(n)[0],i.async=1,i.src="//www.google-analytics.com/analytics.js",r.parentNode.insertBefore(i,r)}(window,document,"script",0,"ga"),ga("create","UA-73329341-1","auto"),ga("send","pageview"),s.ngmodule.config(["$transitionsProvider",function(e){e.onBefore({},function(e){var t=e.treeChanges().to.map(function(e){return e.state.self.url}).filter(function(e){return null!=e&&"^"!==e}).join(""),n=function(e){return ga("send","pageview",e)},s=function(){n(t)},a=function(e){var s=e&&e.hasOwnProperty("type")?e.type:"_";t=t.replace(/^\//,""),n("/errors/"+s+"/"+t)};e.promise.then(s,a)})}])},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n(36),n(37),n(35),n(38),n(39),n(74)},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ngmodule=void 0;var a=n(11),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),r=n(31),o=s(r),c=n(33),l=n(32),u=n(34),d=n(40),f=s(d),p=n(37),m=n(36),g=n(38),v=n(39);(t.ngmodule=i.module("demo",[o.default,f.default,p.MAIN_MODULE.name,m.GLOBAL_MODULE.name,g.MYMESSAGES_MODULE.name,v.PREFS_MODULE.name])).config(["$uiRouterProvider",function(e){e.plugin(c.StickyStatesPlugin),e.plugin(l.DSRPlugin),(0,u.visualizer)(e);var t={name:"contacts.**",url:"/contacts",lazyLoad:function(e){var t=e.injector().get("$ocLazyLoad");return new Promise(function(e){e()}).then(n.bind(null,35)).then(function(e){return t.load(e.CONTACTS_MODULE)})}};e.stateRegistry.register(t)}])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.contactDetail={bindings:{contact:"<"},template:'\n    <div class="flex-h">\n      <div class="details">\n        <h3>{{$ctrl.contact.name.first}} {{$ctrl.contact.name.last}}</h3>\n        <div><label>Company</label><div>{{$ctrl.contact.company}}</div></div>\n        <div><label>Age</label><div>{{$ctrl.contact.age}}</div></div>\n        <div><label>Phone</label><div>{{$ctrl.contact.phone}}</div></div>\n        <div><label>Email</label><div>{{$ctrl.contact.email}}</div></div>\n        <div class="flex-h">\n          <label>Address</label>\n          <div>{{$ctrl.contact.address.street}}<br>\n                {{$ctrl.contact.address.city}}, {{$ctrl.contact.address.state}} {{$ctrl.contact.address.zip}}\n          </div>\n        </div>\n      </div>\n  \n      <div class="flex nogrow">\n        <img ng-src="{{$ctrl.contact.picture}}"/>\n      </div>\n    </div>\n'}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.contactList={bindings:{contacts:"<"},template:'\n    <ul class="selectlist list-unstyled flex nogrow">\n      <li>\n        \x3c!-- This link is a relative ui-sref to the contacts.new state. --\x3e\n        <a ui-sref=".new">\n          <button class="btn btn-primary">\n            <i class="fa fa-pencil"></i><span>New Contact</span>\n          </button>\n        </a>\n      </li>\n  \n      <li>&nbsp;</li>\n  \n      \x3c!-- Highlight the selected contact:\n          When the current state matches the ui-sref\'s state (and its parameters)\n          ui-sref-active applies the \'selected\' class to the li element --\x3e\n      <li ng-repeat="contact in $ctrl.contacts" ui-sref-active="selected">\n        <a ui-sref=".contact({contactId: contact._id})">\n          {{contact.name.first}} {{contact.name.last}}\n        </a>\n      </li>\n    </ul>\n'}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.contactView={bindings:{contact:"<"},template:'\n    <div class="contact">\n    \n      <contact-detail contact="$ctrl.contact"></contact-detail>\n      \n      \x3c!-- This button has an ui-sref to the mymessages.compose state. The ui-sref provides the mymessages.compose\n           state with an non-url parameter, which is used as the initial message model --\x3e\n      <button class="btn btn-primary" ui-sref="mymessages.compose({ message: { to: $ctrl.contact.email } })">\n        <i class="fa fa-envelope"></i><span>Message</span>\n      </button>\n    \n      \x3c!-- This button has a relative ui-sref to the contacts.contact.edit state. --\x3e\n      <button class="btn btn-primary" ui-sref=".edit">\n        <i class="fa fa-pencil"></i><span>Edit Contact</span>\n      </button>\n      \n    </div>\n'}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.contacts={bindings:{contacts:"<"},template:'\n    <div class="my-contacts flex-h">\n    \n      <contact-list contacts="$ctrl.contacts" class="flex nogrow"></contact-list>\n    \n      <div ui-view>\n        \x3c!-- This default content is displayed when the ui-view is not filled in by a child state --\x3e\n        <h4 style="margin: 1em 2em;">Select a contact</h4>\n      </div>\n      \n    </div>'}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.newContactState=t.editContactState=t.viewContactState=t.contactsState=void 0,n(68);t.contactsState={parent:"app",name:"contacts",url:"/contacts",resolve:{contacts:["Contacts",function(e){return e.all()}]},data:{requiresAuth:!0},deepStateRedirect:!0,sticky:!0,views:{contacts:"contacts"}},t.viewContactState={name:"contacts.contact",url:"/:contactId",resolve:{contact:["Contacts","$transition$",function(e,t){return e.get(t.params().contactId)}]},component:"contactView"},t.editContactState={name:"contacts.contact.edit",url:"/edit",views:{"^.^.$default":{bindings:{pristineContact:"contact"},component:"editContact"}}},t.newContactState={name:"contacts.new",url:"/new",component:"editContact"}},function(e,t,n){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),i=function(){function e(t,n,a){s(this,e),this.$state=t,this.DialogService=n,this.Contacts=a}return a(e,[{key:"$onInit",value:function(){this.contact=angular.copy(this.pristineContact)}},{key:"uiCanExit",value:function(){if(this.canExit||angular.equals(this.contact,this.pristineContact))return!0;return this.DialogService.confirm("You have unsaved changes to this contact.","Navigate away and lose changes?")}},{key:"remove",value:function(e){var t=this;this.DialogService.confirm("Delete contact: "+e.name.first+" "+e.name.last).then(function(){return t.Contacts.remove(e)}).then(function(){return t.canExit=!0}).then(function(){return t.$state.go("^.^",null,{reload:!0})})}},{key:"save",value:function(e){var t=this;this.Contacts.save(e).then(function(){return t.canExit=!0}).then(function(){return t.$state.go("^",null,{reload:!0})})}}]),e}();i.$inject=["$state","DialogService","Contacts"];t.editContact={bindings:{pristineContact:"<"},controller:i,template:'\n    <div class="contact">\n      <div class="details">\n        <div><label>First</label>   <input type="text" ng-model="$ctrl.contact.name.first"></div>\n        <div><label>Last</label>    <input type="text" ng-model="$ctrl.contact.name.last"></div>\n        <div><label>Company</label> <input type="text" ng-model="$ctrl.contact.company"></div>\n        <div><label>Age</label>     <input type="text" ng-model="$ctrl.contact.age"></div>\n        <div><label>Phone</label>   <input type="text" ng-model="$ctrl.contact.phone"></div>\n        <div><label>Email</label>   <input type="text" ng-model="$ctrl.contact.email"></div>\n        <div><label>Street</label>  <input type="text" ng-model="$ctrl.contact.address.street"></div>\n        <div><label>City</label>    <input type="text" ng-model="$ctrl.contact.address.city"> </div>\n        <div><label>State</label>   <input type="text" ng-model="$ctrl.contact.address.state"></div>\n        <div><label>Zip</label>     <input type="text" ng-model="$ctrl.contact.address.zip"></div>\n        <div><label>Image</label>   <input type="text" ng-model="$ctrl.contact.picture"></div>\n      </div>\n    \n      <hr>\n    \n      <div>\n        \x3c!-- This button\'s ui-sref relatively targets the parent state, i.e., contacts.contact --\x3e\n        <button class="btn btn-primary" ui-sref="^"><i class="fa fa-close"></i><span>Cancel</span></button>\n        <button class="btn btn-primary" ng-click="$ctrl.save($ctrl.contact)"><i class="fa fa-save"></i><span>Save</span></button>\n        <button class="btn btn-primary" ng-click="$ctrl.remove($ctrl.contact)"><i class="fa fa-close"></i><span>Delete</span></button>\n      </div>\n    </div>\n'}},function(e,t,n){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}();t.AppConfig=function(){function e(){s(this,e),this.sort="+date",this.emailAddress=void 0,this.restDelay=100,this.load()}return a(e,[{key:"load",value:function(){try{return angular.extend(this,angular.fromJson(sessionStorage.getItem("appConfig")))}catch(e){}return this}},{key:"save",value:function(){sessionStorage.setItem("appConfig",angular.toJson(angular.extend({},this)))}}]),e}()},function(e,t,n){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}();(t.AuthService=function(){function e(t,n,a){s(this,e),this.AppConfig=t,this.$q=n,this.$timeout=a,this.usernames=["myself@angular.dev","devgal@angular.dev","devguy@angular.dev"]}return a(e,[{key:"isAuthenticated",value:function(){return!!this.AppConfig.emailAddress}},{key:"authenticate",value:function(e,t){var n=this,s=this.$timeout,a=this.$q,i=this.AppConfig;return s(function(){return a(function(s,a){var i=-1!==n.usernames.indexOf(e),r="password"===t;return i&&r?s(e):a("Invalid username or password")})},800).then(function(e){i.emailAddress=e,i.save()})}},{key:"logout",value:function(){this.AppConfig.emailAddress=void 0,this.AppConfig.save()}}]),e}()).$inject=["AppConfig","$q","$timeout"]},function(e,t,n){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Messages=t.Folders=t.Contacts=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),o=n(131);(t.Contacts=function(e){function t(e,n,i,r){return s(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i,"contacts","data/contacts.json",r))}return i(t,e),t}(o.SessionStorage)).$inject=["$http","$timeout","$q","AppConfig"],(t.Folders=function(e){function t(e,n,i,r){return s(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i,"folders","data/folders.json",r))}return i(t,e),t}(o.SessionStorage)).$inject=["$http","$timeout","$q","AppConfig"],(t.Messages=function(e){function t(e,n,i,r){return s(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i,"messages","data/messages.json",r))}return i(t,e),r(t,[{key:"byFolder",value:function(e){var t={folder:e._id};return t[-1!==["drafts","sent"].indexOf(e._id)?"from":"to"]=this.AppConfig.emailAddress,this.search(t)}}]),t}(o.SessionStorage)).$inject=["$http","$timeout","$q","AppConfig"]},function(e,t,n){"use strict";function s(e,t){return{link:function(n,s){e(function(){return s.addClass("active")}),s.data("promise",t(function(e,t){n.yes=function(){return e(!0)},n.no=function(){return t(!1)}}))},template:'\n      <div class="backdrop"></div>\n      <div class=\'wrapper\'>\n        <div class="content">\n          <h4 ng-show="message">{{message}}</h4>\n          <div ng-show="details">{{details}}</div>\n    \n          <div style="padding-top: 1em;">\n            <button class="btn btn-primary" ng-click="yes()">{{yesMsg}}</button>\n            <button class="btn btn-primary" ng-click="no()">{{noMsg}}</button>\n          </div>\n        </div>\n      </div>\n'}}Object.defineProperty(t,"__esModule",{value:!0}),t.dialog=s,s.$inject=["$timeout","$q"]},function(e,t,n){"use strict";function s(e,t){var n={to:function(e){return e.data&&e.data.requiresAuth}},s=function(e){var t=e.injector().get("AuthService"),n=e.router.stateService;if(!t.isAuthenticated())return n.target("login",void 0,{location:!1})};e.onBefore(n,s,{priority:10})}Object.defineProperty(t,"__esModule",{value:!0}),t.authHookRunBlock=s,s.$inject=["$transitions","AuthService"]},function(e,t,n){"use strict";function s(e){if(null!=e.redirectedFrom())return e.redirectedFrom().targetState();var t=e.router.stateService;return""!==e.from().name?t.target(e.from(),e.params("from")):t.target("home")}Object.defineProperty(t,"__esModule",{value:!0}),t.loginState=t.homeState=t.welcomeState=t.appState=void 0;n(69),n(72),n(70),n(71),t.appState={name:"app",redirectTo:"welcome",component:"app"},t.welcomeState={parent:"app",name:"welcome",url:"/welcome",component:"welcome"},t.homeState={parent:"app",name:"home",url:"/home",component:"home"},t.loginState={parent:"app",name:"login",url:"/login",component:"login",resolve:{returnTo:s}};s.$inject=["$transition$"]},function(e,t,n){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),i=function(){function e(t,n,a,i){s(this,e),this.$state=t,this.DialogService=n,this.AppConfig=a,this.Messages=i}return a(e,[{key:"$onInit",value:function(){this.pristineMessage=angular.extend({from:this.AppConfig.emailAddress},this.$stateParams.message),this.message=angular.copy(this.pristineMessage)}},{key:"uiCanExit",value:function(){if(this.canExit||angular.equals(this.pristineMessage,this.message))return!0;return this.DialogService.confirm("You have not saved this message.","Navigate away and lose changes?","Yes","No")}},{key:"gotoPreviousState",value:function(){var e=this.$transition$,t=!!e.from().name,n=t?e.from():"mymessages.messagelist",s=t?e.params("from"):{};this.$state.go(n,s)}},{key:"send",value:function(e){var t=this;this.Messages.save(angular.extend(e,{date:new Date,read:!0,folder:"sent"})).then(function(){return t.canExit=!0}).then(function(){return t.gotoPreviousState()})}},{key:"save",value:function(e){var t=this;this.Messages.save(angular.extend(e,{date:new Date,read:!0,folder:"drafts"})).then(function(){return t.canExit=!0}).then(function(){return t.gotoPreviousState()})}}]),e}();i.$inject=["$state","DialogService","AppConfig","Messages"];t.compose={bindings:{$stateParams:"<",$transition$:"<"},controller:i,template:'\n    <div class="compose">\n      <div class="header">\n        <div class="flex-h"> <label>Recipient</label> <input type="text" id="to" name="to" ng-model="$ctrl.message.to"> </div>\n        <div class="flex-h"> <label>Subject</label> <input type="text" id="subject" name="subject" ng-model="$ctrl.message.subject"> </div>\n      </div>\n    \n      <div class="body">\n        <textarea name="body" id="body" ng-model="$ctrl.message.body" cols="30" rows="20"></textarea>\n        \n        <div class="buttons">\n          \x3c!-- Clicking this button brings the user back to the state they came from (previous state) --\x3e\n          <button class="btn btn-primary" ng-click="$ctrl.gotoPreviousState()"><i class="fa fa-times-circle-o"></i><span>Cancel</span></button>\n          <button class="btn btn-primary" ng-click="$ctrl.save($ctrl.message)"><i class="fa fa-save"></i><span>Save as Draft</span></button>\n          <button class="btn btn-primary" ng-click="$ctrl.send($ctrl.message)"><i class="fa fa-paper-plane-o"></i><span>Send</span></button>\n        </div>\n      </div>\n    </div>\n'}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.folderList={bindings:{folders:"<"},template:'\n    \x3c!-- Renders a list of folders --\x3e\n    <div class="folderlist">\n      <ul class="selectlist list-unstyled">\n  \n        \x3c!-- Highlight the selected folder:\n            When the current state matches the ui-sref\'s state (and its parameters)\n            ui-sref-active applies the \'selected\' class to the li element --\x3e\n        <li class="folder" ui-sref-active="selected" ng-repeat="folder in $ctrl.folders" >\n          \x3c!-- This ui-sref is a relative link to the \'mymessages.messagelist\' substate. It provides the\n              \'folderId\' parameter value from the current folder\'s .id property --\x3e\n          <a ui-sref=".messagelist({folderId: folder._id})"><i class="fa"></i>{{folder._id}}</a>\n        </li>\n      </ul>\n    </div>\n'}},function(e,t,n){"use strict";function s(e){var t=this;this.AppConfig=e,this.colVisible=function(e){return-1!==t.columns.indexOf(e)}}Object.defineProperty(t,"__esModule",{value:!0});t.messageTable={bindings:{columns:"<",messages:"<"},controller:s,template:'\n    <table>\n      <thead>\n        <tr>\n          <td ng-if="::$ctrl.colVisible(\'read\')"></td>\n          <td ng-if="::$ctrl.colVisible(\'from\')"     sort-messages="from">Sender</td>\n          <td ng-if="::$ctrl.colVisible(\'to\')"       sort-messages="to">Recipient</td>\n          <td ng-if="::$ctrl.colVisible(\'subject\')"  sort-messages="subject">Subject</td>\n          <td ng-if="::$ctrl.colVisible(\'date\')"     sort-messages="date">Date</td>\n        </tr>\n      </thead>\n  \n      <tbody>\n        <tr ng-repeat="message in $ctrl.messages | orderBy: $ctrl.AppConfig.sort track by message._id"\n            ui-sref=".message({messageId: message._id})" ui-sref-active="active">\n          <td ng-if="::$ctrl.colVisible(\'read\')"><i class="fa fa-circle" style="font-size: 50%" ng-show="!message.read"></td>\n          <td ng-if="::$ctrl.colVisible(\'from\')">{{ message.from }}</td>\n          <td ng-if="::$ctrl.colVisible(\'to\')">{{ message.to }}</td>\n          <td ng-if="::$ctrl.colVisible(\'subject\')">{{ message.subject }}</td>\n          <td ng-if="::$ctrl.colVisible(\'date\')">{{ message.date | date: "yyyy-MM-dd" }}</td>\n        </tr>\n      </tbody>\n  \n    </table>\n'};s.$inject=["AppConfig"]},function(e,t,n){"use strict";function s(e){return{restrict:"A",link:function(t,n,s){var a=s.sortMessages;if(a){var i=angular.element("<i style='padding-left: 0.25em' class='fa'></i>");n.append(i),n.on("click",function(t){return e.sort=e.sort==="+"+a?"-"+a:"+"+a}),t.$watch(function(){return e.sort},function(e){i.toggleClass("fa-sort-asc",e=="+"+a),i.toggleClass("fa-sort-desc",e=="-"+a)})}}}}Object.defineProperty(t,"__esModule",{value:!0}),t.sortMessages=s,s.$inject=["AppConfig"]},function(e,t,n){"use strict";function s(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.trustAsHtml(t.split(/\n/).map(function(e){return"<p>"+e+"</p>"}).join("\n"))}}Object.defineProperty(t,"__esModule",{value:!0}),t.messageBody=s,s.$inject=["$sce"]},function(e,t,n){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.message=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),i=n(73),r=function(e,t){return e+t.subject},o=function(e){return"\n\n\n\n---------------------------------------\nOriginal message:\nFrom: "+e.from+"\nDate: "+e.date+"\nSubject: "+e.subject+"\n\n"+e.body},c=function(e,t){return{from:t.to,to:t.from,subject:r(e,t),body:o(t)}},l=function(){function e(t,n,a){s(this,e),this.$state=t,this.DialogService=n,this.Messages=a}return a(e,[{key:"$onInit",value:function(){this.message.read=!0,this.Messages.put(this.message),this.actions=this.folder.actions.reduce(function(e,t){return(0,i.setProp)(e,t,!0)},{})}},{key:"reply",value:function(e){var t=c("Re: ",e);this.$state.go("mymessages.compose",{message:t})}},{key:"forward",value:function(e){var t=c("Fwd: ",e);delete t.to,this.$state.go("mymessages.compose",{message:t})}},{key:"editDraft",value:function(e){this.$state.go("mymessages.compose",{message:e})}},{key:"remove",value:function(e){var t=this,n=this.nextMessageGetter(e._id),s=n?"mymessages.messagelist.message":"mymessages.messagelist",a={messageId:n};this.DialogService.confirm("Delete?",void 0).then(function(){return t.Messages.remove(e)}).then(function(){return t.$state.go(s,a,{reload:"mymessages.messagelist"})})}}]),e}();l.$inject=["$state","DialogService","Messages"];t.message={bindings:{folder:"<",message:"<",nextMessageGetter:"<"},controller:l,template:'\n    <div class="message">\n    \n      <div class="header">\n        <div>\n          <h4>{{$ctrl.message.subject}}</h4>\n          <h5>{{$ctrl.message.from}} <i class="fa fa-long-arrow-right"></i> {{$ctrl.message.to}}</h5>\n        </div>\n    \n        <div class="line2">\n          <div>{{$ctrl.message.date | date: \'longDate\'}} {{$ctrl.message.date | date: \'mediumTime\'}}</div>\n          <div>\n            <button class="btn btn-primary" ng-show="$ctrl.actions.edit" ng-click="$ctrl.editDraft($ctrl.message)"><i class="fa fa-pencil"></i> <span>Edit Draft</span></button>\n            <button class="btn btn-primary" ng-show="$ctrl.actions.reply" ng-click="$ctrl.reply($ctrl.message)"><i class="fa fa-reply"></i> <span>Reply</span></button>\n            <button class="btn btn-primary" ng-show="$ctrl.actions.forward" ng-click="$ctrl.forward($ctrl.message)"><i class="fa fa-forward" ></i> <span>Forward</span></button>\n            <button class="btn btn-primary" ng-show="$ctrl.actions.delete" ng-click="$ctrl.remove($ctrl.message)"><i class="fa fa-close"></i> <span>Delete</span></button>\n          </div>\n        </div>\n      </div>\n    \n      \x3c!-- Pass the raw (plain text) message body through the messageBody filter to format slightly nicer. --\x3e\n      <div class="body" ng-bind-html="::$ctrl.message.body | messageBody"></div>\n    </div>\n'}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.messageList={bindings:{folder:"<",messages:"<"},template:'\n    <div class="messages">\n      <message-table columns="$ctrl.folder.columns" messages="$ctrl.messages"></message-table>\n    </div>\n'}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.mymessages={bindings:{folders:"<"},template:'\n    <div class="my-messages">\n    \n      \x3c!-- Show message folders --\x3e\n      <folder-list folders="$ctrl.folders"></folder-list>\n    \n      \x3c!-- A named view for the list of messages in this folder.  This will be  filled in by the \'mymessages.messagelist\' child state --\x3e\n      <div ui-view="messagelist" class="messagelist"> </div>\n    \n    </div>\n    \n    \x3c!-- A named ui-view for a message\'s contents.  The \'mymessages.messagelist.message\' grandchild state plugs into this ui-view --\x3e\n    <div ui-view="messagecontent"></div>\n'}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.mymessagesState={parent:"app",name:"mymessages",url:"/mymessages",resolve:{folders:["Folders",function(e){return e.all()}]},views:{mymessages:"mymessages"},data:{requiresAuth:!0},deepStateRedirect:{default:{state:"mymessages.messagelist"}},sticky:!0},t.messageListState={name:"mymessages.messagelist",url:"/:folderId",params:{folderId:"inbox"},resolve:{folder:["Folders","$stateParams",function(e,t){return e.get(t.folderId)}],messages:["Messages","folder",function(e,t){return e.byFolder(t)}]},views:{messagelist:"messageList"}},t.messageState={name:"mymessages.messagelist.message",url:"/:messageId",resolve:{message:["Messages","$stateParams",function(e,t){return e.get(t.messageId)}],nextMessageGetter:["MessageListUI","messages",function(e,t){return e.proximalMessageId.bind(e,t)}]},views:{"^.^.messagecontent":"message"}},t.composeState={name:"mymessages.compose",url:"/compose",params:{message:{}},views:{"!$default.mymessages":"compose"}}},function(e,t,n){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}();(t.MessageListUI=function(){function e(t,n){s(this,e),this.$filter=t,this.AppConfig=n}return a(e,[{key:"proximalMessageId",value:function(e,t){var n=this.$filter("orderBy")(e,this.AppConfig.sort),s=n.findIndex(function(e){return e._id===t}),a=n.length>s+1?s+1:s-1;return a>=0?n[a]._id:void 0}}]),e}()).$inject=["$filter","AppConfig"]},function(e,t,n){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),i=function(){function e(t){s(this,e),this.AppConfig=t}return a(e,[{key:"$onInit",value:function(){this.prefs={restDelay:this.AppConfig.restDelay}}},{key:"reset",value:function(){sessionStorage.clear(),document.location.reload(!0)}},{key:"savePrefs",value:function(){angular.extend(this.AppConfig,{restDelay:this.prefs.restDelay}).save(),document.location.reload(!0)}}]),e}();i.$inject=["AppConfig"];t.prefs={controller:i,template:'\n    <div>\n      <button class="btn btn-primary" ng-click="$ctrl.reset()"><i class="fa fa-recycle"></i> <span>Reset All Data</span></button>\n    </div>\n    \n    <div>\n      <label for="restDelay">Simulated REST API delay (ms)</label>\n      <input type="text" name="restDelay" ng-model="$ctrl.prefs.restDelay">\n      <button class="btn btn-primary" ng-click="$ctrl.savePrefs()">Save</button>\n    </div>\n'}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.prefsState={parent:"app",name:"prefs",url:"/prefs",component:"prefs",data:{requiresAuth:!0}}},function(e,t,n){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.SessionStorage=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),i=n(73);(t.SessionStorage=function(){function e(t,n,a,r,o,c){var l=this;s(this,e);var u=void 0,d=sessionStorage.getItem(r);if(this._data=void 0,this._idProp="_id",this._eqFn=function(e,t){return e[l._idProp]===t[l._idProp]},this.$q=a,this.$timeout=n,this.sessionStorageKey=r,this.AppConfig=c,d)try{u=JSON.parse(d)}catch(e){console.log("Unable to parse session messages, retrieving intial data.")}var f=function(e){return(0,i.setProp)(e,"$$hashKey",void 0)};this._data=(u?a.resolve(u):t.get(o).then(function(e){return e.data})).then(this._commit.bind(this)).then(function(){return JSON.parse(sessionStorage.getItem(r))}).then(function(e){return e.map(f)})}return a(e,[{key:"_commit",value:function(e){return sessionStorage.setItem(this.sessionStorageKey,JSON.stringify(e)),this.$q.resolve(e)}},{key:"all",value:function(e){var t=this;return this.$timeout(function(){return t._data},this.AppConfig.restDelay).then(e)}},{key:"search",value:function(e){var t=function(e,t){return-1!==(""+t).indexOf(""+e)},n=function(e,n){return Object.keys(e).reduce(function(s,a){return s&&t(e[a],n[a])},!0)};return this.all(function(t){return t.filter(n.bind(null,e))})}},{key:"get",value:function(e){var t=this;return this.all(function(n){return n.find(function(n){return n[t._idProp]===e})})}},{key:"save",value:function(e){return e[this._idProp]?this.put(e):this.post(e)}},{key:"post",value:function(e){return e[this._idProp]=(0,i.guid)(),this.all(function(t){return(0,i.pushToArr)(t,e)}).then(this._commit.bind(this))}},{key:"put",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._eqFn;return this.all(function(s){var a=s.findIndex(n.bind(null,e));if(-1===a)throw Error(e+" not found in "+t);return s[a]=e,t._commit(s).then(function(){return e})})}},{key:"remove",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._eqFn;return this.all(function(s){var a=s.findIndex(n.bind(null,e));if(-1===a)throw Error(e+" not found in "+t);return s.splice(a,1),t._commit(s).then(function(){return e})})}}]),e}()).$inject=["$http","$timeout","$q","sessionStorageKey","sourceUrl","AppConfig"]}]),[105]);
//# sourceMappingURL=sampleapp.js.map